## 🧩 一、WinMIPS64 是什么

**WinMIPS64** 是一款 **MIPS64 架构处理器模拟器**，它能直观展示：

- **五级流水线 (IF, ID, EX, MEM, WB)** 的执行过程；
- 各个寄存器与内存的变化；
- 指令在每个时钟周期的状态；
- 数据冒险 (Data Hazard)、控制冒险 (Control Hazard) 等情况。

如果你学过计算机组成原理或汇编语言，它可以帮助你理解 **CPU 如何执行指令**。



当你按 F7 逐步执行时，模拟器采用典型的 **5 级 MIPS 流水线**：

1. IF - 取指（黄色）
2. ID - 译码/寄存器读（蓝色）
3. EX - 执行（红色）
4. MEM - 访存（绿色）
5. WB - 写回（紫色）

------

## ⚙️ 二、WinMIPS64 界面简介

打开 WinMIPS64 后主要界面包括：

| 区域                | 功能说明                                   |
| ------------------- | ------------------------------------------ |
| **Code Window**     | 显示并编辑汇编代码                         |
| **Register Window** | 显示寄存器（R0–R31）的值                   |
| **Memory Window**   | 显示内存数据（可按地址查看）               |
| **Pipeline Window** | 展示流水线每个阶段的执行状态               |
| **Cycle Control**   | 用来单步或连续执行程序，观察每个周期的变化 |



常见按钮：

- ▶️ **Run**：连续运行程序
- ⏸ **Stop**：停止运行
- ⏭ **Step**：单步执行一条指令
- ⏱ **Cycle**：单步执行一个时钟周期

------

## 💡 三、基础指令集（MIPS64 常用）

### 1️⃣ 数据传输指令

| 指令              | 格式     | 功能                                      |
| ----------------- | -------- | ----------------------------------------- |
| `LD R1, 0(R2)`    | Load     | 将内存中地址 `R2+0` 的值加载到寄存器 `R1` |
| `SD R1, 8(R2)`    | Store    | 将寄存器 `R1` 的值存入内存地址 `R2+8`     |
| `DADDI R1, R2, 5` | 加立即数 | `R1 = R2 + 5`                             |
| `DSUBI R1, R2, 5` | 减立即数 | `R1 = R2 - 5`                             |



------

### 2️⃣ 算术逻辑指令

| 指令              | 格式 | 功能           |
| ----------------- | ---- | -------------- |
| `DADD R1, R2, R3` | 加法 | `R1 = R2 + R3` |
| `DSUB R1, R2, R3` | 减法 | `R1 = R2 - R3` |
| `DMUL R1, R2, R3` | 乘法 | `R1 = R2 * R3` |
| `AND R1, R2, R3`  | 位与 | `R1 = R2 & R3` |
| `OR R1, R2, R3`   | 位或 | `R1 = R2       |



------

### 3️⃣ 控制流指令

| 指令                | 格式       | 功能                          |
| ------------------- | ---------- | ----------------------------- |
| `BEQ R1, R2, LABEL` | 相等则跳转 | 若 `R1 == R2`，跳转到 `LABEL` |
| `BNE R1, R2, LABEL` | 不等则跳转 | 若 `R1 != R2`，跳转到 `LABEL` |
| `J LABEL`           | 无条件跳转 | 跳转到指定标签                |
| `HALT`              | 停止执行   | 程序结束                      |



------

## 🧠 四、简单示例：两个数相加

我们写一个最简单的程序：计算 `5 + 7 = 12`

```
asm复制编辑.data
value1: .word 5
value2: .word 7
result: .word 0

.text
main:
    LD R1, value1(R0)   # R1 = 5
    LD R2, value2(R0)   # R2 = 7
    DADD R3, R1, R2     # R3 = R1 + R2 = 12
    SD R3, result(R0)   # 存入内存 result
    HALT
```

运行方法：

1. 打开 **WinMIPS64**；
2. 在代码窗口粘贴上述代码；
3. 点击 **Assemble** 编译；
4. 点击 **Run** 或 **Step**；
5. 查看 **寄存器窗口** 和 **内存窗口** 的变化。

------

## 🔍 五、观察流水线执行

- 点击菜单栏中的 **Pipeline Diagram**；
- 每执行一个时钟周期（Cycle），你会看到：
  - IF → ID → EX → MEM → WB 五个阶段；
  - 不同颜色表示指令的不同阶段；
  - 你可以看到指令的重叠执行；
  - 如果出现冒险（Hazard），模拟器会显示气泡（bubble）。

------

## 📘 六、进阶建议

如果你想更深入学习：

- 阅读压缩包内的 **`WinMIPS64 – Documentation Summary.html`**；
- 试着修改代码，如加入 `BEQ`、`LOOP` 循环；
- 观察 **数据相关（Data Hazard）** 和 **分支预测** 的影响；
- 学习如何用 **寄存器初始化数据** 而不是内存。